const html = require('choo/html')
const renderAvatar = require('./avatar')

const comments = [{
  avatar: 'data:image/jpeg;base64,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',
  name: 'Abraham Lincoln',
  text: 'Four score and seven years ago...'
}]

module.exports = function renderComments (state, emit, broadcast) {
  return html`
    <div class="comments">
      <div class="comments-editor">
        ${renderAvatar(state.userProfile)}
        <textarea onkeypress=${onDetectEnter} onkeyup=${onChangeComment} type="text" placeholder="Write a comment...">${state.commentText}</textarea>
      </div>

      ${comments.map(c => html`
        <div class="comment">
          <img class="avatar" src=${c.avatar}/>
          <div class="content">
            <a class="author">${c.name}</a>
            <span class="comment-text">${c.text}</span>
          </div>
        </div>`
      )}
    </div>
  `
  function onDetectEnter (e) {
    if (e.which == 13 || e.keyCode == 13) {
      e.preventDefault()
      emit('submit-comment', broadcast)
    }
  }

  function onChangeComment (e) {
    emit('change-comment-text', e.target.value)
  }
}
